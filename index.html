<!DOCTYPE html>
<html lang="it">

<head>
   <meta charset="UTF-8" />
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css"
      integrity="sha512-DxV+EoADOkOygM4IR9yXP8Sb2qwgidEmeqAEmDKIOfPRQZOWbXCzLC6vjbZyy0vPisbH2SyW27+ddLVCN+OMzQ=="
      crossorigin="anonymous" referrerpolicy="no-referrer" />
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
         integrity="sha512-c42qTSw/wPZ3/5LBzD+Bw5f7bSF2oxou6wEb+I/lqeaKV5FDIfMvvRp772y4jcJLKuGUOpbJMdg/BTl50fJYAw=="
         crossorigin="anonymous" referrerpolicy="no-referrer" />
   <meta name="viewport" content="width=device-width, initial-scale=1.0" />
   <title>Invito al matrimonio</title>
   <style>
      body {
         font-family: sans-serif;
         text-align: center;
         background: #fdf6f0;
         padding: 20px;
      }

      h1 {
         color: #1db5a3;
      }

      a.button {
         color: #1db5a3;
         text-decoration: none;
         font-weight: bold;
      }
   </style>
</head>

<body>
   <div id="app" style="color: #1db5a3;">
      <div v-if="!openInvito" class="invito-container animate__animated animate__fadeIn">
         <img src="./img/fedi.png" alt="" style="max-width: 125px;">
         <h1 class="animate__animated animate__rubberBand" @animationend="startFotoAnimation">
            Sei stato invitato al matrimonio di Simone e Cecilia.
         </h1>
      
         <div class="animate__animated animate__fadeIn foto-container" v-if="showFoto" @animationend="startButtonAnimation">
            <div class="image-wrapper">
               <img class="img-fluid" style="border-radius: 10px;" src="./img/foto2.jpg" alt="">
            </div>
         </div>
      
         <div class="animate__animated animate__tada" v-if="showButton">
            <button class="btn btn-outline-secondary" @click="openInvito = true">
               Apri l'invito
            </button>
         </div>
      </div>

      <div v-else>
         <h1 class="animate__animated animate__backInLeft" @animationend="startMessageAnimation">{{ titolo }}</h1>
         <p class="lead text-dark animate__animated animate__backInRight" v-html="messaggio" v-if="showMessage"  @animationend="startFotoNostraAnimation"></p>

         <div class="my-3 animate__animated animate__zoomIn" v-if="showFotoNostra" @animationend="startLinksAnimation">
            <img class="img-fluid w-100 mt-3 mb-4" style="max-width: 300px;" src="./img/foto1.jpg" alt="">
         </div>
         
         <div class="d-flex justify-content-center">
            <div class="my-3 animate__animated animate__zoomIn" v-if="showLinks" @animationend="startTimelineAnimation">
               <div class="hero d-flex justify-content-center">
                  <img src="./img/mancini4.jpg" alt="Casale Mancini" class="hero-img img-fluid">
                  <div class="overlay-text">
                     <div class="h2">Casale Mancini</div>
                     <div class="my-3">
                        <i class="fa-solid fa-location-dot fs-4"></i>
                        <a class="button text-white" :href="linkMaps" target="_blank">
                           Apri su Google Maps
                        </a>
                     </div>
               
                     <div class="my-3">
                        <i class="fa-solid fa-house fs-4"></i>
                        <a class="button text-white" :href="linkSite" target="_blank">
                           Visita sito web
                        </a>
                     </div>
                  </div>
               </div>
            </div>
         </div>

         <div ref="scrollTimeline" class="my-5" :class="{'animate__animated animate__slideInUp': isVisibleTimeline, 'opacity-0': !isVisibleTimeline}" v-if="showTimeline" @animationend="startRestAnimation">
            <div class="h3 my-3">Wedding Timeline</div>
            <div class="timeline">
               <div class="item left">
                  <div class="d-flex justify-content-end">
                     <div class="content">
                        <span class="time">ORE 17:00</span>
                        <div class="icon" aria-hidden>üìç</div>
                        Arrivo 
                     </div>
                  </div>
               </div>
            
               <div class="item right">
                  <div class="content">
                     <span class="time">ORE 18:00</span>
                     <div class="icon" aria-hidden>üíç</div>
                     Inizio cerimonia
                  </div>
               </div>
            
               <div class="item left">
                  <div class="d-flex justify-content-end">
                     <div class="content">
                        <span class="time">ORE 18:30</span>
                        <div class="icon" aria-hidden>üì∑</div>
                        Fotografia formale
                     </div>
                  </div>
               </div>
            
               <div class="item right">
                  <div class="content">
                     <span class="time">ORE 19:00</span>
                     <div class="icon" aria-hidden>ü•Ç</div>
                     Inizio apericena
                  </div>
               </div>

               <div class="item left">
                  <div class="d-flex justify-content-end">
                     <div class="content">
                        <span class="time">ORE 20:00</span>
                        <div class="icon" aria-hidden>üçΩÔ∏è</div>
                        Inizio cena
                     </div>
                  </div>
               </div>

               <div class="item right">
                  <div class="content">
                     <span class="time">ORE 00:00</span>
                     <div class="icon" aria-hidden>üéÇ</div>
                     Taglio della torta
                  </div>
               </div>
            </div>
         </div>

         <div class="animate__animated animate__zoomIn" v-if="showRest">
            <div class="lead text-dark mb-3">
               Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam, quae. Molestias, quia. Corrupti, quidem. Inventore, eaque. Quisquam, quae. Molestias, quia.
            </div>

            <div class="row">
               <div class="col-sm-6">
                  <div ref="scrollText" :class="{'animate__animated animate__fadeInLeft': isVisibleText, 'opacity-0': !isVisibleText}" class="card card-body my-3" style="position: relative;">
                     <div class="bg-white" style="position: absolute; top: -25px; left: calc(50% - 20px); border: 1px solid #1db5a3; border-radius: 100%; width: 50px; height: 50px;">
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
                           <i class="fa-solid fa-user-tie fs-3"></i>
                        </div>
                     </div>
                     <div class="my-3">
                        Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam, quae. Molestias, quia. Corrupti, quidem. Inventore, eaque. Quisquam, quae. Molestias, quia.
                     </div>
                  </div>
               </div>

               <div class="col-sm-6">
                  <div ref="scrollText" :class="{'animate__animated animate__fadeInRight': isVisibleText, 'opacity-0': !isVisibleText}" class="my-3 card card-body">
                     <div class="bg-white"
                        style="position: absolute; top: -25px; left: calc(50% - 20px); border: 1px solid #1db5a3; border-radius: 100%; width: 50px; height: 50px;">
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
                           <i class="fa-solid fa-plane-departure fs-3"></i>
                        </div>
                     </div>
                     <div class="my-3">
                        Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam, quae. Molestias, quia. Corrupti, quidem.
                        Inventore, eaque. Quisquam, quae. Molestias, quia.
                     </div>
                  </div>
               </div>
            </div>


            <div ref="scrollResponse" :class="{'animate__animated animate__bounceIn': isVisibleText, 'opacity-0': !isVisibleText}" class="mb-2">
               <div class="mt-3 lead text-dark">
                  Parteciperai al matrimonio?
               </div>
         
               <!-- <div class="d-flex justify-content-center mt-3">
                  <a class="btn btn-outline-success me-2"" :href="confirmForm" target="_blank">
                     <i class="fa-solid fa-check"></i> SI
                  </a>
                  <a class="btn btn-outline-danger" :href="declineForm" target="_blank">
                     <i class="fa-solid fa-xmark"></i> NO
                  </a>
         
               </div> -->

               <div class="d-flex justify-content-center mt-3">
                  <a class="btn btn-invito btn_success me-3" :href="confirmForm" target="_blank">
                     <i class="fa-solid fa-check"></i> S√¨
                  </a>
                  <a class="btn btn-invito btn_danger" :href="declineForm" target="_blank">
                     <i class="fa-solid fa-xmark"></i> No
                  </a>
               </div>
            </div>

         </div>
   
      </div>
   </div>

   <!-- Vue dal CDN -->
   <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
   <script>
      const { createApp } = Vue;

      createApp({
         data() {
            return {
               openInvito: false,
               titolo: "Simone & Cecilia",
               messaggio: "Ti aspettiamo il 19 giugno 2026 alle ore 17:00! <br> Clicca i link sottostanti per scoprire dove si svolgeraÃÄ il matrimonio.",
               linkMaps: "https://maps.google.com/?q=43.36270877336705,10.493467509937789",
               linkSite: "https://www.ilcasalemancini.it/",
               confirmForm: "https://docs.google.com/forms/d/e/1FAIpQLSfLws1b_sL77HAw77O0bZZMXU0RuNhUTWHQpZWCdw-3J9ooVw/viewform?usp=pp_url&entry.1250792882=Si",
               declineForm: "https://docs.google.com/forms/d/e/1FAIpQLSfLws1b_sL77HAw77O0bZZMXU0RuNhUTWHQpZWCdw-3J9ooVw/viewform?usp=pp_url&entry.1250792882=No&entry.237150830=0&entry.608514429=-",
               showFoto: false,
               showFotoNostra: false,
               showButton: false,
               showMessage: false,
               showLinks: false,
               showTimeline: false,
               showRest: false,
               isVisibleText: false,
               isVisibleResponse: false,
               isVisibleTimeline: false
            };
         },

         methods: {
            startFotoAnimation() {
               this.showFoto = true;
            },
            startButtonAnimation() {
               this.showButton = true;
            },

            startMessageAnimation() {
               this.showMessage = true;
            },

            startFotoNostraAnimation() {
               this.showFotoNostra = true;
            },

            startLinksAnimation() {
               this.showLinks = true;
            },

            startTimelineAnimation() {
               this.showTimeline = true;
            },

            startRestAnimation() {
               this.showRest = true;
            },

            isInViewPort(ref, bool) {
               console.log(ref);
               
               const el = this.$refs[ref];
               console.log(el);
               
               if (!el) return;

               const rect = el.getBoundingClientRect();
               const altezzaViewport = window.innerHeight || document.documentElement.clientHeight;

               if (rect.top <= altezzaViewport * 0.9) { // entra nell'90% del viewport
                  this[bool] = true;
                  window.removeEventListener('scroll', this.isInViewPort); // rimuovo listener dopo animazione
               }
            }
         },

         mounted() {
            this._scrollHandler = () => this.isInViewPort('scrollTimeline', 'isVisibleTimeline');
            window.addEventListener('scroll', this._scrollHandler);

            this.isInViewPort('scrollText', 'isVisibleText'); // controllo subito

            this._scrollHandler = () => this.isInViewPort('scrollText', 'isVisibleText');
            window.addEventListener('scroll', this._scrollHandler);

            this.isInViewPort('scrollText', 'isVisibleText'); // controllo subito

            this._scrollHandler = () => this.isInViewPort('scrollResponse', 'isVisibleText');
            window.addEventListener('scroll', this._scrollHandler);

            this.isInViewPort('scrollResponse', 'isVisibleText'); // controllo subito
         },
      }).mount("#app");
   </script>

   <style>
      body {
         font-family: 'Playfair Display', serif;
      }

      .invito-container {
         max-width: 500px;
         margin: 50px auto;
         padding: 30px;
         border: 2px solid #e0cfc4;
         border-radius: 20px;
         background: #fff8f0; /* colore ‚Äúpanna‚Äù elegante */
         box-shadow: 0 8px 20px rgba(0,0,0,0.15);
         text-align: center;
         color: #5a4631;
      }

      .image-wrapper {
         width: 100%;
         overflow: hidden;
         display: flex;
         justify-content: center;
         align-items: center;
      }

      .image-wrapper img {
         width: 100%;
         height: 100%;
         object-fit: cover; 
         object-position: center;
      }

      .foto-container {
         margin: 20px 0;
         overflow: hidden;
         border-radius: 15px;
         border: 1px solid #e0cfc4;
      }

      .btn-outline-secondary {
         border-radius: 50px;
         border: 2px solid #d1bfa7;
         color: #5a4631;
         padding: 10px 25px;
         font-weight: bold;
         background: linear-gradient(145deg, #fff8f0, #f9f0e6);
         box-shadow: 2px 2px 5px rgba(0,0,0,0.1);
         transition: all 0.3s ease;
      }

      .btn-outline-secondary:hover {
         transform: translateY(-3px);
         box-shadow: 4px 4px 10px rgba(0,0,0,0.2);
         background: #f9f0e6;
         /* background: linear-gradient(145deg, #e0cfc4, #f9f0e6); */
         color: #5a4631;
      }

      .hero {
         position: relative;
         width: 100%;
         max-width: 1200px;
         margin: 0 auto;
      }

      .hero-img {
         width: 45%;
         height: auto; 
         display: block;
         object-fit: cover;
         opacity: 0.8;
      }

      @media (max-width: 768px) {
         .hero-img {
            width: 100%;
         }
      }

      .overlay-text {
         position: absolute;
         top: 50%;
         left: 50%;
         transform: translate(-50%, -50%);
         text-align: center;
         color: white;
         background: rgba(29, 181, 163, 0.9);
         padding: 1rem 1rem;
         border-radius: 16px;
         border: 1px solid rgba(255, 255, 255, 0.2);
         /* Ombra pi√π sofisticata */
         box-shadow: 
            0 8px 32px rgba(0, 0, 0, 0.3),
            inset 0 1px 0 rgba(255, 255, 255, 0.2);
         text-shadow: 4px 4px 9px rgba(0,0,0,0.9);
      }

      .overlay-text h1 {
         font-size: 2.5rem;
         margin-bottom: 0.5rem;
      }

      .overlay-text p {
         margin-bottom: 1rem;
      }

      .btn-invito {
         border-radius: 50px;            /* bordi arrotondati */
         padding: 10px 25px;             /* pi√π spazio intorno al testo */
         font-weight: 400;               /* testo leggermente pi√π marcato */
         box-shadow: 0 4px 10px rgba(0,0,0,0.1);
         transition: all 0.3s ease;
      }

      .btn-invito:hover {
         transform: translateY(-6px);
         box-shadow: 0 6px 15px rgba(0,0,0,0.2);
      }

      .btn_success {
         background: linear-gradient(135deg, #d4edda, #a8e5a2);
         border: 2px solid #5cb85c;
         color: #2f6627;
      }

      .btn_success:hover {
         background: linear-gradient(135deg, #d4edda, #a8e5a2);
         border: 2px solid #63d063;
         color: #51b043;
      }

      .btn_danger {
         background: linear-gradient(135deg, #f8d7da, #f1a1a8);
         border: 2px solid #d9534f;
         color: #842029;
      }

      .btn_danger:hover {
         background: linear-gradient(135deg, #f8d7da, #f1a1a8);
         border: 2px solid #f75e59;
         color: #d93543;
      }


      .timeline {
         position: relative;
         /* width: 800px; */
         margin: 0 auto;
      }

      /* linea centrale */
      .timeline::before {
         content: "";
         position: absolute;
         top: 0;
         bottom: 0;
         left: 50%;
         width: 4px;
         background: #1db5a3;
         transform: translateX(-50%);
      }

      .item {
         position: relative;
         width: 50%;
         padding: 10px 20px;
         box-sizing: border-box;
      }

      /* punto sulla linea */
      .item::before {
         content: "";
         position: absolute;
         top: 30px;
         width: 14px;
         height: 14px;
         background: #fff;
         border: 3px solid #1db5a3;
         border-radius: 50%;
         z-index: 1;
      }

      .left {
         left: 0;
         text-align: right;
      }
      .left::before {
         right: -7px; /* mezzo diametro sulla linea */
      }

      .right {
         left: 50%;
         text-align: left;
      }
      .right::before {
         left: -7px;
      }

      .content {
         background: #fff;
         padding: 16px 20px;
         border-radius: 8px;
         box-shadow: 0 2px 6px rgba(0,0,0,0.05);
         width: 30%;        /* invece di inline-block */
         box-sizing: border-box;
      }

      .time {
         font-weight: bold;
         color: #1db5a3;
         display: block;
         margin-bottom: 4px;
      }

      @media (max-width: 900px) {
         .content {
            width: 100%;
            text-align: center;
         }
      }
   </style>
</body>

</html>